package com.bitdubai.fermat_api.layer.dmp_network_service.crypto_transmission.interfaces;

import com.bitdubai.fermat_api.layer.all_definition.enums.CryptoCurrency;
import com.bitdubai.fermat_api.layer.all_definition.transaction_transference_protocol.TransactionProtocolManager;
import com.bitdubai.fermat_api.layer.all_definition.enums.TransactionMetadataState;
import com.bitdubai.fermat_api.layer.dmp_network_service.crypto_transmission.exceptions.CantAcceptCryptoRequestException;
import com.bitdubai.fermat_api.layer.dmp_network_service.crypto_transmission.exceptions.CantGetTransactionStateException;
import com.bitdubai.fermat_api.layer.dmp_network_service.crypto_transmission.exceptions.CantSetToCreditedInWalletException;
import com.bitdubai.fermat_api.layer.dmp_network_service.crypto_transmission.exceptions.CantSetToSeenByCryptoVaultException;
import com.bitdubai.fermat_api.layer.dmp_network_service.crypto_transmission.exceptions.CouldNotTransmitCryptoException;

import java.util.UUID;

/**
 * The interface <code>com.bitdubai.fermat_api.layer.dmp_network_service.crypto_transmission.interfaces.CryptoTransmissionNetworkServiceManager</code>
 * provides the methods to send and receive meta information of crypto transactions.
 */
public interface CryptoTransmissionNetworkServiceManager extends TransactionProtocolManager<FermatCryptoTransaction> {

    /**
     * The method <code>informTransactionRegisteredInWallet</code> informs the peer network service
     * that sent the transaction that the said transaction has been credited in its destination wallet.
     *
     * @param identifier an identifier of the transmission, it could be the requestId or a transmissionId
     * @throws CantSetToCreditedInWalletException
     */
    public void informTransactionRegisteredInWallet(UUID identifier) throws CantSetToCreditedInWalletException;

    /**
     * The method <code>informTransactionSeenByVault</code> informs the peer network service that sent
     * the identified transaction that the transaction has been registered by the crypto vault in
     * this device
     *
     * @param identifier an identifier of the transmission, it could be the requestId or a transmissionId
     * @throws CantSetToSeenByCryptoVaultException
     */
    public void informTransactionSeenByVault(UUID identifier) throws CantSetToSeenByCryptoVaultException;

    /**
     * The method <code>getState</code> returns the status of the transmission sent.
     *
     * @param identifier an identifier of the transmission, it could be the requestId or a transmissionId
     * @return the status of the transmission
     * @throws CantGetTransactionStateException
     */
    public TransactionMetadataState getState(UUID identifier) throws CantGetTransactionStateException;

    /**
     * The method <code>acceptCryptoRequest</code> sends the meta information associated to a crypto
     * transaction through the fermat network services as an answer to a payment request
     *
     * @param requestId                       The identifier of the payment request that created this transaction
     * @param cryptoCurrency                  The crypto currency of the payment
     * @param cryptoAmount                    The crypto amount being sent
     * @param senderPublicKey                 The public key of the sender of the payment
     * @param destinationPublicKey            The public key of the destination of a payment
     * @param associatedCryptoTransactionHash The hash of the crypto transaction associated with this meta information
     * @param paymentDescription              The description of the payment
     * @throws CantAcceptCryptoRequestException
     */
    public void acceptCryptoRequest(UUID requestId,
                                    CryptoCurrency cryptoCurrency,
                                    long cryptoAmount,
                                    String senderPublicKey,
                                    String destinationPublicKey,
                                    String associatedCryptoTransactionHash,
                                    String paymentDescription) throws CantAcceptCryptoRequestException;


    /**
     * The method <code>sendCrypto</code> sends the meta information associated to a crypto transaction
     * through the fermat network services
     *
     * @param transmissionId                  The identifier of the transmission generated by the transactional layer
     * @param cryptoCurrency                  The crypto currency of the payment
     * @param cryptoAmount                    The crypto amount being sent
     * @param senderPublicKey                 The public key of the sender of the payment
     * @param destinationPublicKey            The public key of the destination of a payment
     * @param associatedCryptoTransactionHash The hash of the crypto transaction associated with this meta information
     * @param paymentDescription              The description of the payment
     * @throws CouldNotTransmitCryptoException
     */
    public void sendCrypto(UUID transmissionId,
                           CryptoCurrency cryptoCurrency,
                           long cryptoAmount,
                           String senderPublicKey,
                           String destinationPublicKey,
                           String associatedCryptoTransactionHash,
                           String paymentDescription
    ) throws CouldNotTransmitCryptoException;
}
